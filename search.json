[{"path":"https://cjbarrie.github.io/extremeR/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 extremeR authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://cjbarrie.github.io/extremeR/articles/case-control-worm.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Case-control estimation: Worm's eye","text":"Estimating models described Explaining Recruitment Violent Extremism: Bayesian Case-Control Approach (ERVE) requires just two steps: Prepare data sources list format using data.prep() Estimate model using fit() explainer vignette walks two steps. Step 1 requires two sources data: survey data labels “cases” “controls” (well relevant covariates) shapefile geographical region investigation; Step 2 requires two data sources prepared list format passed estimating equation.","code":""},{"path":"https://cjbarrie.github.io/extremeR/articles/case-control-worm.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Case-control estimation: Worm's eye","text":"First install package source already installed. load package memory follows. can load data need memory using data bundled package follows. can see case-control survey data, survey_egypt, denominator data, denom_mena “data.table” “data.frame” objects. Egypt shapefile data stored “sf” “data.frame” object. Note using data bundled extremeR package. series shapefiles type provided e.g. , generate “sf” object files follows.","code":"devtools::install_github(\"cjbarrie/extremeR\") library(extremeR) data(survey_egypt) data(shape_egypt) data(denom_mena) class(survey_egypt) ## [1] \"data.table\" \"data.frame\" class(shape_egypt) ## [1] \"sf\"         \"data.frame\" class(denom_mena) ## [1] \"data.table\" \"data.frame\" shapefile_path <- \"data/EGY_adm2.shp\" shape_egypt <- sf::st_read(shapefile_path)"},{"path":"https://cjbarrie.github.io/extremeR/articles/case-control-worm.html","id":"inspect-data","dir":"Articles","previous_headings":"","what":"Inspect data","title":"Case-control estimation: Worm's eye","text":"Now data source need: .e., case-control data shapefile, ready inspect data. begin case-control data. shapefile data plotted . relevant geographic identifiers ’ll using shapefile “ADM1_EN” large area “ADM2_EN” small area. ’ll merging “ADM2_PCODE” identifier, common identifier shapefile case-control data.  Finally, need input information known prevalence outcome population interest. , need know relevant population denominator. ERVE example, adult male Sunni population. extract relevant denominator Egypt can follows.","code":"denom_egypt <- denom_mena$male_18_sunni[which(denom_mena$country==\"Egypt\")]"},{"path":"https://cjbarrie.github.io/extremeR/articles/case-control-worm.html","id":"preparing-the-data","dir":"Articles","previous_headings":"","what":"Preparing the data","title":"Case-control estimation: Worm's eye","text":"now position bundle data sources list object suitable fit() function estimate one models described ERVE. data.prep() function series parameters tabulate describe . data.prep() function takes shapefile case-control data bundles list. can look structure data . see list contains survey data, shapefiles, generated neighbourhood matrices, outcome observations etc. can check neighbourhood matrix properly connected using testconnected() function .","code":"#TODO fix long vectors not supported error--at present below load pre-estimated data list  # prep data data.list =   data.prep(     shape = shape_egypt,     survey = survey_egypt,     shape_large.area_id_name = \"ADM1_EN\",     shape_large.area_id_num = NA,     shape_small.area_id_name = \"ADM2_EN\",     shape_small.area_id_num = \"ADM2_PCODE\",     survey_small.area_id_name = NA,     survey_small.area_id_num = \"adm2_pcode\",     drop.incomplete.records = T,     colnames_X = c(       \"coledu\",       \"age\",       \"married\",       \"student\",       \"lowstat\",       \"population_density\",       \"total_population_2006\",       \"christian_2006_pct\",       \"university_2006_pct\",       \"agriculture_2006_pct\",       \"mursi_vote_2012_pct\",       \"sqrt_killed_at_rabaa\",       \"unemployment_2013q4_pct\",       \"sqrt_protest_post_Mubarak\"     ),     interactions_list = list(age2 = \"age*age\", coledu_lowstat = \"coledu*lowstat\"),     scale_X = \"1sd\",     colname_y = \"case\",     contamination = T,     pi = 1000 / denom_egypt,     large_area_shape = T   ) summary(data.list) ##                    Length Class      Mode      ## survey_complete        20 data.table list      ## n                       1 -none-     numeric   ## y                     617 -none-     numeric   ## pi                      1 -none-     numeric   ## n1                      1 -none-     numeric   ## n0                      1 -none-     numeric   ## offset                  1 -none-     numeric   ## theta_1                 1 -none-     numeric   ## theta_0                 1 -none-     numeric   ## X                      17 data.table list      ## p                       1 -none-     numeric   ## mu_X                   16 -none-     numeric   ## sd_X                   16 -none-     numeric   ## scale_X                 1 -none-     character ## small_area_id         617 -none-     numeric   ## small_area_names      365 -none-     character ## large_area_id         617 -none-     numeric   ## large_area_names       27 -none-     character ## N_large_area            1 -none-     numeric   ## nb_object             365 nb         list      ## N_small_area            1 -none-     numeric   ## node1_small_area      824 -none-     numeric   ## node2_small_area      824 -none-     numeric   ## N_small_area_edges      1 -none-     numeric   ## scaling_factor          1 -none-     numeric   ## nb.matrix          133225 -none-     numeric   ## shape_small            20 sf         list      ## shape_large             2 sf         list # check that the nb object is fully connected testconnected(data.list$nb_object) ## [1] \"Success! The Graph is Fully Connected\""},{"path":"https://cjbarrie.github.io/extremeR/articles/case-control-worm.html","id":"estimate-model","dir":"Articles","previous_headings":"","what":"Estimate model","title":"Case-control estimation: Worm's eye","text":"ready estimate ERVE model Egyptian case-control data.","code":"fit_object = fit(   data = data.list,   show_code = T,   contamination = T,   offset = T,   beta_prior = \"cauchy\",   small_area_prior = \"BYM2\",   intercept_scale = 10,   large_area_prior = \"random\",   iter = 25000,   warmup = 22500,   thin = 4,   cores = 4,   chains = 4,   control = list(max_treedepth = 25, adapt_delta = 0.99),   verbose = T )"},{"path":"https://cjbarrie.github.io/extremeR/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Christopher Barrie. Author, maintainer. Roberto Cerina. Author. Neil Ketchley. Contributor.","code":""},{"path":"https://cjbarrie.github.io/extremeR/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Barrie C, Cerina R (2022). extremeR: Bayesian Case-Control Approach Analyzing Extreme Behavior. https://github.com/cjbarrie/extremeR, https://cjbarrie.github.io/extremeR/.","code":"@Manual{,   title = {extremeR: A Bayesian Case-Control Approach for Analyzing Extreme Behavior},   author = {Christopher Barrie and Roberto Cerina},   year = {2022},   note = {https://github.com/cjbarrie/extremeR, https://cjbarrie.github.io/extremeR/}, }"},{"path":"https://cjbarrie.github.io/extremeR/index.html","id":"extremer-","dir":"","previous_headings":"","what":"A Bayesian Case-Control Approach for Analyzing Extreme Behavior","title":"A Bayesian Case-Control Approach for Analyzing Extreme Behavior","text":"Repository package accompanying paper “Explaining Recruitment Violent Extremism: Bayesian Case-Control Approach.”","code":""},{"path":"https://cjbarrie.github.io/extremeR/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"A Bayesian Case-Control Approach for Analyzing Extreme Behavior","text":"goal package make easy user : Prepare data estimation procedure (data.prep()) Estimate Bayesian case-control models (fit()) Simulate example data (dgf()) can begin using package loading memory using:","code":"devtools::install_github(\"cjbarrie/extremeR\")"},{"path":"https://cjbarrie.github.io/extremeR/index.html","id":"getting-started","dir":"","previous_headings":"","what":"Getting started","title":"A Bayesian Case-Control Approach for Analyzing Extreme Behavior","text":"three principal extremeR functions. Preparing data achieved data.prep(), allows user bundle main relevant data source (case-control data shapefile data) list object estimation. Estimating models different specifications achieved fit(), allows user estimate models described associated article, specify hierarchical structure, priors, contamination layer etc. Simulating example data achieved dgf(), allows user simulate case-control data specified spatial structure level spatial autocorrelation—among parameters—test model fit.","code":"library(extremeR)"},{"path":"https://cjbarrie.github.io/extremeR/reference/NYleukemia.html","id":null,"dir":"Reference","previous_headings":"","what":"Shapefile data for dgf() function: New York — NYleukemia","title":"Shapefile data for dgf() function: New York — NYleukemia","text":"Data taken SpatialEpi package.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/NYleukemia.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shapefile data for dgf() function: New York — NYleukemia","text":"","code":"NYleukemia"},{"path":"https://cjbarrie.github.io/extremeR/reference/NYleukemia.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Shapefile data for dgf() function: New York — NYleukemia","text":"object class list length 5.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/NYleukemia.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Shapefile data for dgf() function: New York — NYleukemia","text":"https://cran.r-project.org/web/packages/SpatialEpi/index.html","code":""},{"path":[]},{"path":"https://cjbarrie.github.io/extremeR/reference/data.prep.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare data — data.prep","title":"Prepare data — data.prep","text":"Prepare data format required estimation procedure described \"Explaining Recruitment Violent Extremism: Bayesian Case-Control Approach.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/data.prep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare data — data.prep","text":"","code":"data.prep(   shape,   survey,   shape_large.area_id_name = NA,   shape_large.area_id_num = NA,   shape_small.area_id_name = NA,   shape_small.area_id_num = NA,   survey_small.area_id_num = NA,   survey_small.area_id_name = NA,   drop.incomplete.records = NA,   colnames_X = NA,   interactions_list = NA,   scale_X = NA,   colname_y = NA,   contamination = T,   pi = NA,   large_area_shape = F )"},{"path":"https://cjbarrie.github.io/extremeR/reference/data.prep.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare data — data.prep","text":"shape shapefile survey data can connected shape file small-area id; shape_large.area_id_name large area identifiers shapefile; shape_large.area_id_num large area identifiers shapefile; shape_small.area_id_name small area identifiers shapefile; survey_small.area_id_num small area identifiers survey; survey_small.area_id_name small area identifiers survey; drop.incomplete.records function return complete data?; colnames_X character vector covariates definining design matrix X. Note numeric; interactions_list list object element string form \"*b\" names two variables colnames_X. scale_X takes values \"1sd\" \"2sd\" corresponding namely (x-xbar)/sd(x) (x-xbar)/(2sd(x)). scaling NA ; colname_y variable name outcome variable - note numeric ; contamination function spits offset based log(P1/P0) (see Rota et al. 2013) - offset account contamination ? ; pi scalar defining prevalence outcome population interest ; large_area_shape hould function return large-area shapefile ? shape_small.area_id_numsmall area identifiers shapefile;","code":""},{"path":[]},{"path":"https://cjbarrie.github.io/extremeR/reference/denom_mena.html","id":null,"dir":"Reference","previous_headings":"","what":"Denominator data for MENA countries — denom_mena","title":"Denominator data for MENA countries — denom_mena","text":"Male Sunni population 18 9 MENA countries.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/denom_mena.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Denominator data for MENA countries — denom_mena","text":"","code":"denom_mena"},{"path":"https://cjbarrie.github.io/extremeR/reference/denom_mena.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Denominator data for MENA countries — denom_mena","text":"object class data.table (inherits data.frame) 9 rows 7 columns.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/denom_mena.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Denominator data for MENA countries — denom_mena","text":"https://population.un.org/wpp/Download/Standard/Population/","code":""},{"path":[]},{"path":"https://cjbarrie.github.io/extremeR/reference/dgf.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate data generating process — dgf","title":"Simulate data generating process — dgf","text":"Function simulate data relevant data generating process (DGP) ; currently function supports creation DGPs 1 layer area effects (.e. small-area effects)","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/dgf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate data generating process — dgf","text":"","code":"dgf(   n.sims = 1,   n = 100,   pi.hat.naive = 0.5,   p = 1,   X_corr = 0,   pi = 0.05,   Moran.I.corr = 0.8,   spatial_structure = \"scotland_lipcancer\" )"},{"path":"https://cjbarrie.github.io/extremeR/reference/dgf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate data generating process — dgf","text":"n.sims many samples simulated data like?; n large (sample size) sample ?; pi.hat.naive fraction cases sample?; p many normally-distributed covariates DGP ?; X_corr average correlation among covariates?; pi population-level probability sampling case? Moran..corr degree global spatial autocorrelation (Moran ) underlying DGP ?; spatial_structure map data simulated ? (scotland_lipcancer, pennsylvania_lungcancer, newyork_leukemia)","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/dgf.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate data generating process — dgf","text":"list object","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/fit.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to estimate a Bayesian case-control model. — fit","title":"Function to estimate a Bayesian case-control model. — fit","text":"Function estimate Bayesian case-control model.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/fit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to estimate a Bayesian case-control model. — fit","text":"","code":"fit(   data = data_sim,   contamination = F,   offset = F,   beta_prior = \"normal\",   small_area_prior = \"fixed\",   large_area_prior = NA,   intercept_scale = NA,   iter = 100,   warmup = 50,   thin = 4,   cores = 4,   chains = 4,   control = list(max_treedepth = 7, adapt_delta = 0.8),   verbose = TRUE )"},{"path":"https://cjbarrie.github.io/extremeR/reference/fit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to estimate a Bayesian case-control model. — fit","text":"data data list object containing ad-minimum following elements: contamination model include rota et al. (2013) style contamination layer?; offset model include King Zeng (2001) style offset ? contamination also specified, contaminated-offset ; beta_prior prior regression coefficients ? choice normal cauchy; small_area_prior small-area effects type ? choice area fixed effects, area random effects, area ICAR effects area BYM2 effects NA = area effects; large_area_prior small-area effects type ? choice area fixed effects, area random effects, NA = area effects; intercept_scale arguments stan, see ?stan information. iter number draws; arguments stan, see ?stan information warmup number warmup draws thin number thin draws cores numvber cores use chains number chains control list; tree depth adapta delta verbose print full stan output show_code stan code print screen end run ? (useful checks);","code":""},{"path":[]},{"path":"https://cjbarrie.github.io/extremeR/reference/isdisconnected.html","id":null,"dir":"Reference","previous_headings":"","what":"Check graph disconnected — isdisconnected","title":"Check graph disconnected — isdisconnected","text":"Test nb object disconnected","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/isdisconnected.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check graph disconnected — isdisconnected","text":"","code":"isdisconnected(x)"},{"path":"https://cjbarrie.github.io/extremeR/reference/isdisconnected.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check graph disconnected — isdisconnected","text":"x nb object","code":""},{"path":[]},{"path":"https://cjbarrie.github.io/extremeR/reference/pennLC.html","id":null,"dir":"Reference","previous_headings":"","what":"Shapefile data for dgf() function: Penn — pennLC","title":"Shapefile data for dgf() function: Penn — pennLC","text":"Data taken SpatialEpi package.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/pennLC.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shapefile data for dgf() function: Penn — pennLC","text":"","code":"pennLC"},{"path":"https://cjbarrie.github.io/extremeR/reference/pennLC.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Shapefile data for dgf() function: Penn — pennLC","text":"object class list length 4.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/pennLC.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Shapefile data for dgf() function: Penn — pennLC","text":"https://cran.r-project.org/web/packages/SpatialEpi/index.html","code":""},{"path":[]},{"path":"https://cjbarrie.github.io/extremeR/reference/scotland.html","id":null,"dir":"Reference","previous_headings":"","what":"Shapefile data for dgf() function: scotland — scotland","title":"Shapefile data for dgf() function: scotland — scotland","text":"Data taken SpatialEpi package.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/scotland.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shapefile data for dgf() function: scotland — scotland","text":"","code":"scotland"},{"path":"https://cjbarrie.github.io/extremeR/reference/scotland.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Shapefile data for dgf() function: scotland — scotland","text":"object class list length 4.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/scotland.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Shapefile data for dgf() function: scotland — scotland","text":"https://cran.r-project.org/web/packages/SpatialEpi/index.html","code":""},{"path":[]},{"path":"https://cjbarrie.github.io/extremeR/reference/shape_egypt.html","id":null,"dir":"Reference","previous_headings":"","what":"Shapefile data for Egypt — shape_egypt","title":"Shapefile data for Egypt — shape_egypt","text":"District-level shapefile data Egypt","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/shape_egypt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shapefile data for Egypt — shape_egypt","text":"","code":"shape_egypt"},{"path":"https://cjbarrie.github.io/extremeR/reference/shape_egypt.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Shapefile data for Egypt — shape_egypt","text":"object class sf (inherits data.frame) 365 rows 20 columns.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/shape_egypt.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Shapefile data for Egypt — shape_egypt","text":"https://data.humdata.org/dataset/geoboundaries-admin-boundaries--egypt/resource/920c7328-f6d1-4882-86f7-45e283cee521","code":""},{"path":[]},{"path":"https://cjbarrie.github.io/extremeR/reference/survey_egypt.html","id":null,"dir":"Reference","previous_headings":"","what":"Case-control data for Egypt ISIS cases and controls — survey_egypt","title":"Case-control data for Egypt ISIS cases and controls — survey_egypt","text":"Data taken leaked ISIS border documents..","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/survey_egypt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Case-control data for Egypt ISIS cases and controls — survey_egypt","text":"","code":"survey_egypt"},{"path":"https://cjbarrie.github.io/extremeR/reference/survey_egypt.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Case-control data for Egypt ISIS cases and controls — survey_egypt","text":"object class data.table (inherits data.frame) 727 rows 16 columns.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/survey_egypt.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Case-control data for Egypt ISIS cases and controls — survey_egypt","text":"Includes information home district, individual-level, area-level covariates.","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/testconnected.html","id":null,"dir":"Reference","previous_headings":"","what":"Test graph connected — testconnected","title":"Test graph connected — testconnected","text":"Test nb object fully connected","code":""},{"path":"https://cjbarrie.github.io/extremeR/reference/testconnected.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test graph connected — testconnected","text":"","code":"testconnected(nb_object)"},{"path":"https://cjbarrie.github.io/extremeR/reference/testconnected.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test graph connected — testconnected","text":"nb_object nb object prepared data list","code":""},{"path":[]}]
